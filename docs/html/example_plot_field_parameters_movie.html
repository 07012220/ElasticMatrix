<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,IE=9,chrome=1"><meta name="generator" content="MATLAB R2019a"><title>Example Plot Field Parameters - Movie</title><style type="text/css">.rtcContent { padding: 30px; } .S0 { margin: 3px 10px 5px 4px; padding: 0px; line-height: 28.7999992370605px; min-height: 0px; white-space: pre-wrap; color: rgb(213, 80, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 24px; font-weight: normal; text-align: left;  }
.S1 { margin: 2px 10px 9px 4px; padding: 0px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: normal; text-align: left;  }
.S2 { margin: 20px 10px 5px 4px; padding: 0px; line-height: 20px; min-height: 0px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 20px; font-weight: bold; text-align: left;  }
.CodeBlock { background-color: #F7F7F7; margin: 10px 0 10px 0;}
.S3 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 1px solid rgb(233, 233, 233); border-bottom: 0px none rgb(0, 0, 0); border-radius: 4px 4px 0px 0px; padding: 6px 45px 0px 13px; line-height: 17.2339992523193px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 14px;  }
.S4 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 0px none rgb(0, 0, 0); border-bottom: 0px none rgb(0, 0, 0); border-radius: 0px; padding: 0px 45px 0px 13px; line-height: 17.2339992523193px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 14px;  }
.S5 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 0px none rgb(0, 0, 0); border-bottom: 1px solid rgb(233, 233, 233); border-radius: 0px 0px 4px 4px; padding: 0px 45px 4px 13px; line-height: 17.2339992523193px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 14px;  }
.S6 { margin: 3px 10px 5px 4px; padding: 0px; line-height: 20px; min-height: 0px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 20px; font-weight: bold; text-align: left;  }</style></head><body><div class = rtcContent><h1  class = 'S0'><span>Example Plot Field Parameters - Movie</span></h1><div  class = 'S1'><span>This example continues from Example: Plot Field Parameters, and demonstrates how to create a movie of a stress or displacement field.</span></div><h2  class = 'S2'><span>Initialize an </span><span style=' font-family: monospace;'>ElasticMatrix</span><span> Object</span></h2><div  class = 'S1'><span>Initialize the </span><span style=' font-family: monospace;'>ElasticMatix</span><span> object, in this example it will be an aluminium plate in water.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre;"><span style="color: rgb(0, 127, 0);">% Medium class:</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>my_medium = Medium(</span><span style="color: rgb(0, 0, 255);">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>    </span><span style="color: rgb(191, 0, 191);">'water'</span><span>, Inf, </span><span style="color: rgb(191, 0, 191);">'aluminium'</span><span>, 0.001, </span><span style="color: rgb(191, 0, 191);">'water'</span><span>, Inf);</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span style="color: rgb(0, 127, 0);">% Initialize an ElasticMatrix object:</span></span></div></div><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span>my_model = ElasticMatrix(my_medium);</span></span></div></div></div><h2  class = 'S6'><span>Setting Calculation Parameters</span></h2><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre;"><span style="color: rgb(0, 127, 0);">% Chosen angle and frequency: Symmetric Lamb mode:</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>angle_s = 18.17;</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>freq_s  = 6.092e6;</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span style="color: rgb(0, 127, 0);">% Antisymmetric Lamb mode:</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>angle_a = 19.99;</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>freq_a  = 4.425e6;</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span style="color: rgb(0, 127, 0);">% Define plotting vectors:</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>sample_points = 64;</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>Z = linspace(-1.5e-3, 0.5e-3, sample_points);</span></span></div></div><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span>X = linspace(-1.5e-3, 1.5e-3, sample_points);</span></span></div></div></div><h2  class = 'S6'><span>Loop, Plot and Write Movie</span></h2><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S3'><span style="white-space: pre;"><span style="color: rgb(0, 127, 0);">% Initialize and open video writer objects:</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>vS = VideoWriter(</span><span style="color: rgb(191, 0, 191);">'TestAlPlateSmode.mp4'</span><span>, </span><span style="color: rgb(191, 0, 191);">'MPEG-4'</span><span>); </span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>open(vS) </span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>vA = VideoWriter(</span><span style="color: rgb(191, 0, 191);">'TestAlPlateAmode.mp4'</span><span>, </span><span style="color: rgb(191, 0, 191);">'MPEG-4'</span><span>); </span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>open(vA)  </span></span></div></div><div class="inlineWrapper"><div  class = 'S4'></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span style="color: rgb(0, 127, 0);">% Create time array:</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>t_vec =  linspace(0e-6, 0.5e-6, 200);</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span style="color: rgb(0, 127, 0);">% Loop over time array:</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span style="color: rgb(0, 0, 255);">for </span><span>tdx = 1:length(t_vec)</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>    </span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>    </span><span style="color: rgb(0, 127, 0);">% Calculate fields for a symmetric and anti-symmetric mode:</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>    field_s = my_model.calculateField(freq_s, angle_s, {Z, X}, t_vec(tdx));</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>    field_a = my_model.calculateField(freq_a, angle_a, {Z, X}, t_vec(tdx));</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>    </span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>    </span><span style="color: rgb(0, 127, 0);">% For the first loop - use a plotting argument:</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>    </span><span style="color: rgb(0, 0, 255);">if </span><span>tdx == 1</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>        </span><span style="color: rgb(0, 127, 0);">% Use a mesh plotting style:</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>        fig_h1 = my_model.plotField(field_s, </span><span style="color: rgb(191, 0, 191);">'mesh'</span><span>);</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>        fig_h2 = my_model.plotField(field_a, </span><span style="color: rgb(191, 0, 191);">'mesh'</span><span>);</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>    </span><span style="color: rgb(0, 0, 255);">else</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>        </span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>        </span><span style="color: rgb(0, 127, 0);">% For the remaining loops pass the figure handle:</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>        </span><span style="color: rgb(0, 127, 0);">% Symmetric mode:</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>        my_model.plotField(field_s, fig_h1);</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>        </span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>        </span><span style="color: rgb(0, 127, 0);">% Force update plot:</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>        frame_s = getframe(gcf);   </span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>        writeVideo(vS, frame_s); </span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>        </span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>        </span><span style="color: rgb(0, 127, 0);">% Plot the anti-symmetric mode:</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>        my_model.plotField(field_a, fig_h2);</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>        </span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>        </span><span style="color: rgb(0, 127, 0);">% Force update plot:</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>        frame_a = getframe(gcf); </span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>        writeVideo(vA, frame_a); </span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>        </span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>    </span><span style="color: rgb(0, 0, 255);">end</span><span>     </span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span style="color: rgb(0, 0, 255);">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span style="color: rgb(0, 127, 0);">% Close VideoWriter objects:</span></span></div></div><div class="inlineWrapper"><div  class = 'S4'><span style="white-space: pre;"><span>close(vS)  </span></span></div></div><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span>close(vA)</span></span></div></div></div></div>
<br>
<!-- 
##### SOURCE BEGIN #####
%% Example Plot Field Parameters - Movie
% This example continues from Example: Plot Field Parameters, and demonstrates 
% how to create a movie of a stress or displacement field.
%% Initialize an |ElasticMatrix| Object
% Initialize the |ElasticMatix| object, in this example it will be an aluminium 
% plate in water.

% Medium class:
my_medium = Medium(...
    'water', Inf, 'aluminium', 0.001, 'water', Inf);

% Initialize an ElasticMatrix object:
my_model = ElasticMatrix(my_medium);
%% Setting Calculation Parameters

% Chosen angle and frequency: Symmetric Lamb mode:
angle_s = 18.17;
freq_s  = 6.092e6;

% Antisymmetric Lamb mode:
angle_a = 19.99;
freq_a  = 4.425e6;

% Define plotting vectors:
sample_points = 64;
Z = linspace(-1.5e-3, 0.5e-3, sample_points);
X = linspace(-1.5e-3, 1.5e-3, sample_points);
%% Loop, Plot and Write Movie

% Initialize and open video writer objects:
vS = VideoWriter('TestAlPlateSmode.mp4', 'MPEG-4'); 
open(vS) 
vA = VideoWriter('TestAlPlateAmode.mp4', 'MPEG-4'); 
open(vA)  

% Create time array:
t_vec =  linspace(0e-6, 0.5e-6, 200);

% Loop over time array:
for tdx = 1:length(t_vec)
    
    % Calculate fields for a symmetric and anti-symmetric mode:
    field_s = my_model.calculateField(freq_s, angle_s, {Z, X}, t_vec(tdx));
    field_a = my_model.calculateField(freq_a, angle_a, {Z, X}, t_vec(tdx));
    
    % For the first loop - use a plotting argument:
    if tdx == 1
        % Use a mesh plotting style:
        fig_h1 = my_model.plotField(field_s, 'mesh');
        fig_h2 = my_model.plotField(field_a, 'mesh');
    else
        
        % For the remaining loops pass the figure handle:
        % Symmetric mode:
        my_model.plotField(field_s, fig_h1);
        
        % Force update plot:
        frame_s = getframe(gcf);   
        writeVideo(vS, frame_s); 
        
        % Plot the anti-symmetric mode:
        my_model.plotField(field_a, fig_h2);
        
        % Force update plot:
        frame_a = getframe(gcf); 
        writeVideo(vA, frame_a); 
        
    end     
end

% Close VideoWriter objects:
close(vS)  
close(vA)
##### SOURCE END #####
--></body></html>